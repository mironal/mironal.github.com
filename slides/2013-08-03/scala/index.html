<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>新宿Scala座 3</title>
        <link type="text/css" rel="stylesheet" href="assets/css/show.css" />
        <link type="text/css" rel="stylesheet" href="assets/css/prettify.css" />
        <script type="text/javascript" src="assets/js/jquery.min.js"></script>
        <script type="text/javascript" src="assets/js/show.js"></script>
        <script type="text/javascript" src="assets/js/prettify/prettify.js"></script>
        <script type="text/javascript" src="assets/js/prettify/lang-apollo.js"></script><script type="text/javascript" src="assets/js/prettify/lang-css.js"></script><script type="text/javascript" src="assets/js/prettify/lang-hs.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lisp.js"></script><script type="text/javascript" src="assets/js/prettify/lang-lua.js"></script><script type="text/javascript" src="assets/js/prettify/lang-ml.js"></script><script type="text/javascript" src="assets/js/prettify/lang-proto.js"></script><script type="text/javascript" src="assets/js/prettify/lang-scala.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-sql.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vb.js"></script><script type="text/javascript" src="assets/js/prettify/lang-vhdl.js"></script><script type="text/javascript" src="assets/js/prettify/lang-wiki.js"></script><script type="text/javascript" src="assets/js/prettify/lang-yaml.js"></script><link type="text/css" rel="stylesheet" href="css/custom.css?1375571567715" />
      <script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
      </head>
      <body>
        <div id="slides">
          <div id="reel">
            <div class="content" id="slide-0"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EScalatra%3C%2Fspan%3E%E3%81%A7%3Cspan+class%3D%22red%22%3EWebSocket%3C%2Fspan%3E"><span class="blue">Scalatra</span>で<span class="red">WebSocket</span></h1>
                </div>
      </div><div class="content" id="slide-1"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EScalatra%3C%2Fspan%3E%E3%81%A7%3Cspan+class%3D%22red%22%3EWebSocket%3C%2Fspan%3E"><span class="blue">Scalatra</span>で<span class="red">WebSocket</span></h1><h2 id="%E3%81%AB%E8%BE%BF%E3%82%8A%E3%81%A4%E3%81%91%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%AE%E3%81%A7%E3%80%81%E3%81%9D%E3%81%93%E3%81%BE%E3%81%A7%E3%81%AE%E3%81%8A%E8%A9%B1">に辿りつけなかったので、そこまでのお話</h2>
                </div>
      </div><div class="content" id="slide-2"><div class="container">
                  <h2 id="%E8%87%AA%E5%B7%B1%E7%B4%B9%E4%BB%8B">自己紹介</h2><h2 id=""><a  href="https://twitter.com/mironal">@mironal -&gt; 山口勝也</a></h2><img src="http://mironal.github.io/images/twitter_icon.jpeg">
<br />
<p><a  href="http://mironal-memo.blogspot.jp">Blog -&gt; http://mironal-memo.blogspot.jp</a>
</p><p><a  href="http://www.flickr.com/photos/mironal">Flickr -&gt; http://www.flickr.com/photos/mironal</a>
</p><p><a  href="https://github.com/mironal">GitHub -&gt; https://github.com/mironal</a>
</p><p><a  href="http://mironal.github.io">勉強会の資料達 -&gt; http://mironal.github.io</a>
</p>
                </div>
      </div><div class="content" id="slide-3"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EScalatra%3C%2Fspan%3E%E3%81%A3%E3%81%A6%EF%BC%9F"><span class="blue">Scalatra</span>って？</h1><p>RubyのSinatraっぽく書けるWebFramework.
</p><pre><code class="prettyprint lang-scala">class HelloWorldApp extends ScalatraFilter {
  get(&quot;/&quot;) {
    &lt;h1&gt;Hello, {params(&quot;name&quot;)}&lt;/h1&gt;
  }
}
</code></pre><p><span class="red">XMLリテラル</span>があるから捗るね！
</p><span class="v-small">※ちなみにSinatra使ったこと無い／(^o^)＼</span>

                </div>
      </div><div class="content" id="slide-4"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EPlay2%3C%2Fspan%3E%E3%81%A8%E6%AF%94%E8%BC%83%E3%81%97%E3%81%A6"><span class="blue">Play2</span>と比較して</h1><ul><li>コンパクト
</li></ul><br />
<span class="red">さくっと何かを作るのに良さそう</span>
<br />
<br />
<h2 id="%E3%82%82%E3%81%A1%E3%82%8D%E3%82%93%E6%9C%AC%E6%A0%BC%E7%9A%84%E3%81%AA%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E3%82%82">もちろん本格的なプロジェクトにも</h2><p><a  href="https://github.com/takezoe/gitbucket">gitbucket</a>
</p>
                </div>
      </div><div class="content" id="slide-5"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EWebSocket%3C%2Fspan%3E%E4%BD%BF%E3%81%88%E3%82%8B%E3%81%AE%3F"><span class="blue">WebSocket</span>使えるの?</h1><p>リポジトリに<span class="blue">AtmosphereChat.scala</span>というWebSocketのサンプルが含まれている.
</p>
                </div>
      </div><div class="content" id="slide-6"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3Eexample%3C%2Fspan%3E%E3%81%AE%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95"><span class="blue">example</span>の実行方法</h1><pre><code class="prettyprint lang-sh"># cloneしてくる
git clone git@github.com:scalatra/scalatra.git
# 移動してsbt
cd scalatra
sbt
# sbtの中で
container:start
# ブラウザでアクセス
open localhost:8080
</code></pre>
                </div>
      </div><div class="content" id="slide-7"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3Eexample%3C%2Fspan%3E%E3%81%8C%E5%A3%8A%E3%82%8C%E3%81%A6%E3%81%9F%E3%81%AE%E3%81%A7%EF%BE%8C%EF%BE%9F%EF%BE%99%EF%BE%98%EF%BD%B8"><span class="blue">example</span>が壊れてたのでﾌﾟﾙﾘｸ</h1><p><a  href="https://github.com/scalatra/scalatra/commit/39ba4a62de450d2ec22b358d24e9048d2dcec57">https://github.com/scalatra/scalatra/commit/39ba4a62de450d2ec22b358d24e9048d2dcec57b</a>
</p><br />
<p>diff
</p><pre><code class="prettyprint lang-diff">-  defaultScripts = &quot;/jquery/jquery-1.9.0.js&quot; :: &quot;/assets/js/bootstrap.min.js&quot; :: Nil
+  defaultScripts = &quot;/assets/js/jquery.min.js&quot; :: &quot;/assets/js/bootstrap.min.js&quot; :: Nil
</code></pre>
                </div>
      </div><div class="content" id="slide-8"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EScalatra%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%3C%2Fspan%3E%E3%81%AE%E4%BD%9C%E3%82%8A%E6%96%B9"><span class="blue">Scalatraプロジェクト</span>の作り方</h1><p><a  href="https://github.com/n8han/giter8">giter8</a>を使います.
</p><pre><code class="prettyprint lang-sh">&gt; g8 scalatra/scalatra-sbt
</code></pre><p>色々聞かれるので適当に答える
</p><pre><code class="prettyprint lang-sh">&gt; g8 scalatra/scalatra-sbt
organization [com.example]:
package [com.example.app]:
name [My Scalatra Web App]:
servlet_name [MyScalatraServlet]:
scala_version [2.9.2]:
version [0.1.0-SNAPSHOT]:
</code></pre>
                </div>
      </div><div class="content" id="slide-9"><div class="container">
                  <h1 id="%E8%89%B2%E3%80%85%E4%BD%9C%E3%82%89%E3%82%8C%E3%82%8B">色々作られる</h1><pre><code class="">.
├── README.md
├── project
│   ├── build.properties
│   ├── build.scala
│   └── plugins.sbt
├── sbt
└── src
    ├── main
    │   ├── resources
    │   │   └── logback.xml
    │   ├── scala
    │   │   ├── ScalatraBootstrap.scala
    │   │   └── hoge
    │   │       ├── HogeStack.scala
    │   │       └── MyScalatraServlet.scala
    │   └── webapp
    │       └── WEB-INF
    │           ├── templates
    │           │   ├── layouts
    │           │   │   └── default.jade
    │           │   └── views
    │           │       └── hello-scalate.jade
    │           └── web.xml
    └── test
        └── scala
            └── hoge
                └── MyScalatraServletSpec.scala
</code></pre>
                </div>
      </div><div class="content" id="slide-10"><div class="container">
                  <h1 id="%E5%AE%9F%E8%A1%8C%E6%96%B9%E6%B3%95">実行方法</h1><pre><code class="prettyprint lang-sh">&gt; cd project-dir
&gt; sbt
&gt; container:start
</code></pre>
                </div>
      </div><div class="content" id="slide-11"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3Eeclipse%3C%2Fspan%3E%E3%81%A7%E9%96%8B%E7%99%BA%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B"><span class="blue">eclipse</span>で開発できるようにする</h1><p>sbt内で
</p><pre><code class="prettyprint lang-sh">eclipse
</code></pre><p>と実行すれば、eclipseにimport出来る形になる.
</p><br />
<h2 id="%3Cspan+class%3D%22red%22%3E%E3%81%8C%EF%BC%81%E3%81%97%E3%81%8B%E3%81%97%EF%BC%81%3C%2Fspan%3E"><span class="red">が！しかし！</span></h2>
                </div>
      </div><div class="content" id="slide-12"><div class="container">
                  <h1 id="%E5%AE%A3%E8%A8%80%E5%85%83%E3%81%AB%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%81%99%E3%82%8B%E3%81%A8%E2%80%A6">宣言元にジャンプすると…</h1><img src="sectiona/code-jump.png">

                </div>
      </div><div class="content" id="slide-13"><div class="container">
                  <h1 id="Oh%E2%80%A6+%E8%AA%AD%E3%82%81%E3%81%AA%E3%81%84%E2%80%A6">Oh… 読めない…</h1><img src="sectiona/class-file.png">

                </div>
      </div><div class="content" id="slide-14"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3Eeclipse%3C%2Fspan%3E%E3%81%A7%E9%96%8B%E7%99%BA%E3%81%A7%E3%81%8D%E3%82%8B%28ry.+%3Cspan+class%3D%22red%22%3E%E3%81%9D%E3%81%AE2%3C%2Fspan%3E"><span class="blue">eclipse</span>で開発できる(ry. <span class="red">その2</span></h1><p>sbt内で
</p><pre><code class="prettyprint lang-sh">eclipse with-source=true
</code></pre><br />
<p>with-source=trueでライブラリの<span class="red">ソースコードが関連付けされた状態</span>でEclipseのプロジェクトが生成される
</p><br />
<p>:情報源
<a  href="https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse">https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse</a>
</p>
                </div>
      </div><div class="content" id="slide-15"><div class="container">
                  <h1 id="%E3%81%93%E3%82%8C%E3%81%A7%E5%AE%A3%E8%A8%80%E5%85%83%E3%81%AB%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%97%E3%81%A7%E3%81%8D%E3%82%8B">これで宣言元にジャンプできる</h1><img src="sectiona/src-file.png">
<br />
<span class="red">捗るね！</span>

                </div>
      </div><div class="content" id="slide-16"><div class="container">
                  <h1 id="%3Cspan+class%3D%22blue%22%3EScalatra%3C%2Fspan%3E%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E7%B4%B9%E4%BB%8B"><span class="blue">Scalatra</span>で書いたコードを紹介</h1><br />
<pre><code class="prettyprint lang-scala">class HelloWorldApp extends ScalatraFilter {
  get(&quot;/&quot;) {
    &lt;h1&gt;Hello, {params(&quot;name&quot;)}&lt;/h1&gt;
  }
}
</code></pre>
                </div>
      </div><div class="content" id="slide-17"><div class="container">
                  <h1 id="%E7%B0%A1%E5%8D%98%E3%81%AA%E3%83%AB%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0">簡単なルーティング</h1><pre><code class="prettyprint lang-scala">  get(&quot;/&quot;) {
    &lt;h1&gt;Hello!&lt;/h1&gt;
  }

  get(&quot;/user/:id&quot;) {
    &lt;h1&gt;Id is {params(&quot;id&quot;)}&lt;/h1&gt;
  }
</code></pre><p><a  href="(http://www.scalatra.org/2.2/guides/http/routes.html">http://www.scalatra.org/2.2/guides/http/routes.html</a>
</p>
                </div>
      </div><div class="content" id="slide-18"><div class="container">
                  <h1 id="%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92Option%E3%81%A7%E5%8F%96%E5%BE%97">パラメータをOptionで取得</h1><pre><code class="prettyprint lang-scala">  // /user?id=10
  get(&quot;/user&quot;) {
    val opt: Option[String] = params.get(&quot;id&quot;)

    // idが無かったら400BadRequestを返す
    opt match {
      case Some(id) =&gt;  &lt;h1&gt; ID is {id}&lt;/h1&gt;
      case None =&gt; halt(400)
    }
  }
</code></pre>
                </div>
      </div><div class="content" id="slide-19"><div class="container">
                  <h1 id="getOrElse%E3%81%A7%E3%82%B9%E3%83%83%E3%82%AD%E3%83%AA">getOrElseでスッキリ</h1><pre><code class="prettyprint lang-scala">  // /user?id=10
  get(&quot;/user&quot;) {
    val id = params.getOrElse(&quot;id&quot;,halt(400))
    &lt;h1&gt; ID is {id}&lt;/h1&gt;
  }
</code></pre>
                </div>
      </div><div class="content" id="slide-20"><div class="container">
                  <h1 id="Hook">Hook</h1><pre><code class="prettyprint lang-scala">  before(){
    println(&quot;before!!!&quot;)
  }

  after(){
    println(&quot;after!!!&quot;)
  }
</code></pre>
                </div>
      </div><div class="content" id="slide-21"><div class="container">
                  <h1 id="%E7%89%B9%E5%AE%9A%E3%81%AE%E9%A0%98%E5%9F%9F%E3%81%A0%E3%81%91">特定の領域だけ</h1><pre><code class="prettyprint lang-scala">  before(&quot;/user&quot;){
    println(&quot;before!!!&quot;)
  }

  after(&quot;/user&quot;){
    println(&quot;after!!!&quot;)
  }
</code></pre>
                </div>
      </div><div class="content" id="slide-22"><div class="container">
                  <h1 id="%E8%89%B2%E3%80%85%E3%81%AAHTTP%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89">色々なHTTPメソッド</h1><pre><code class="prettyprint lang-scala">  get(&quot;/articles/:id&quot;) {
  }

  post(&quot;/articles&quot;) {
  }

  put(&quot;/articles/:id&quot;) {
  }

  delete(&quot;/articles/:id&quot;) {
  }
</code></pre>
                </div>
      </div><div class="content" id="slide-23"><div class="container">
                  <p>以上!
</p><p>また別の機会に
</p><ul><li>atosphere
</li><li>WebSocket</li></ul>
                </div>
      </div>
          </div>
        </div>
        
      </body>
    </html>